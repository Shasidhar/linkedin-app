<!--
<html>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
    api_key: 75h4v3j41fph8x
    onLoad: getCompanies
    authorize: true
</script>
<body>
<div class="container">
<script type="in/Login">
</script>
<div id="profiles"></div>
</div>
<script type="text/javascript">
    function getCompanies(){
        IN.API.Connections("me")
                .fields("firstName", "lastName", "industry","positions:(company)")
                .result(displayProfiles);
    }
    function displayProfiles(profiles) {
        var members = profiles.values;
        for(i=0;i<members.length;i++){
            console.log(member.firstName);
            console.log(member.positions.values[0].company);
        }
    }
</script>
</body>
</html>-->
<html>
<head>
    <title>LinkedIn JavaScript API Hello World</title>

    <!-- 1. Include the LinkedIn JavaScript API and define a onLoad callback function -->
    <script type="text/javascript" src="https://platform.linkedin.com/in.js">
     api_key:75h4v3j41fph8x
     onLoad: onLinkedInLoad
     authorize: true
     </script>

    <script type="text/javascript">
        // 2. Runs when the JavaScript framework is loaded
        function onLinkedInLoad() {
            IN.Event.on(IN, "auth", onLinkedInAuth);
        }

        // 2. Runs when the viewer has authenticated
        function onLinkedInAuth() {
            IN.API.Connections("me")
                    .fields("firstName", "lastName", "industry","positions:(company)")
                    .result(displayProfiles);
        }

        // 2. Runs when the Profile() API call returns successfully
        function displayProfiles(profiles) {
            /*member = profiles.values[0];
            document.getElementById("profiles").innerHTML =
                    "<p id=\"" + member.id + "\">Hello " +  member.firstName + " " + member.lastName + "</p>";*/
            var members = profiles.values;
            var companiesArray = new Array() ;
            for(i=0;i<members.length;i++){
                var member = members[i];
                if(member.positions.values!=null){
                    companiesArray.push(positions.values[0].company.name);
//                    console.log(member.firstName+","+member.positions.values[0].company.name);
                }
            }
           console.log(companiesArray);
        }
    </script>
</head>
<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
<body>
<div id="profiles"></div>
</div>
</body>
